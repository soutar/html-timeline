!function(e,t){var n=function(e,t,n){var i;return function(){function o(){n||e.apply(s,l),i=null}var s=this,l=arguments;i?clearTimeout(i):n&&e.apply(s,l),i=setTimeout(o,t||100)}};jQuery.fn[t]=function(e){return e?this.bind("resize",n(e)):this.trigger(t)}}(jQuery,"smartresize"),function(e){function t(n){var i=this,o=e("body").innerWidth();return this instanceof t?("function"!=typeof e&&i.log("jQuery 1.11.0+ is required for the timeline"),i.settings={debug:!1,breakpoint:480},e.extend(i.settings,n),i.settings.hasOwnProperty("element")||i.log("Please provide an element to timeline-ize"),i.timeline=i.settings.element,i.points=[],i.clearStyles(),i.populatePoints(),o>=i.settings.breakpoint&&i.condenseTimeline(),void e(window).smartresize(function(){o=e("body").innerWidth(),i.clearStyles(),o>=i.settings.breakpoint&&(i.populatePoints(),i.condenseTimeline())})):new t}function n(t){var i=this;return this instanceof n?(i.element=t,void(e(i.element).hasClass("event")?(i.type="event",i.side=e(i.element).css("float")):e(i.element).hasClass("timestamp")&&(i.type="timestamp"))):new n}t.prototype.clearStyles=function(){e(self.timeline).removeClass("js"),e("*",self.timeline).attr("style","")},t.prototype.populatePoints=function(){var t=this;t.points=[],e(".event, .timestamp",t.timeline).each(function(e,i){t.points.push(new n(i))})},t.prototype.log=function(e){var t=this;t.settings.debug&&console.log(e)},t.prototype.setTimelineHeight=function(){var t,n=this,i=e(n.timeline).children().last();t=i.position().top+i.outerHeight(!0),e(n.timeline).css("height",t)},t.prototype.condenseTimeline=function(){var t=this;e(t.timeline).addClass("js"),t.topValue=0,e(t.points).each(function(e,n){t.applyPositioning(e,n)}),t.setTimelineHeight()},t.prototype.applyPositioning=function(t,n){var i=this,o=n.element;e(o).css(i.generateStyle(t,n)).css(n.baseStyle())},t.prototype.generateStyle=function(t,n){var i,o,s=this,l=(n.element,{});return"event"===n.type?(i=e(n.element).children(".tl-badge").css("width"),o="50% - "+parseInt(i)/2+"px","left"===n.side?l.right="calc("+o+")":l.left="calc("+o+")"):"timestamp"==n.type,l.top=s.getTopValue(t,n),l},t.prototype.getTopValue=function(t,n){function i(e){var t;return t=c.points.slice(0,e)}function o(e,t){return t[t.length-1]}function s(e,t){var n;return n=t.filter(function(e){return"timestamp"===e.type},c),n[n.length-1]}function l(e,t,n){var i;return i=n.filter(function(e){return e.side===t},c)}var r,p,u,a,c=this,h=[];return c.log("-------------------------"),previousPoints=i(t),0===t?(c.topValue=0,c.log(n),c.log([0])):(r=o(t,previousPoints),p=s(t,previousPoints),u=l(t,n.side,previousPoints),h.push(0),"event"===n.type?(u.length&&(a=u[u.length-1],h.push(e(a.element).position().top+e(a.element).outerHeight(!0))),"object"==typeof p&&h.push(e(p.element).position().top+e(p.element).outerHeight(!0)),previousPoints.length&&e(n.element).prevAll(".event").length&&h.push(e(n.element).prevAll(".event").position().top+e(n.element).prevAll(".event").children(".tl-badge").outerHeight(!0))):"timestamp"===n.type&&("object"==typeof p&&h.push(e(p.element).position().top+e(p.element).outerHeight(!0)),previousPoints.length&&e(n.element).prevAll(".event").length&&h.push(e(n.element).prevAll(".event").position().top+e(n.element).prevAll(".event").children(".tl-badge").outerHeight(!0))),c.topValue=Math.max.apply(Math,h),c.log(n),c.log(h)),c.topValue},n.prototype.baseStyle=function(){var e;return e={position:"absolute"}},e.prototype.timeline=function(e){this.each(function(n,i){i.id&&(e.element=i,new t(e))})}}(jQuery);